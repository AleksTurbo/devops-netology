# Домашнее задание к занятию "11.2  "Микросервисы: принципы""

## Задание 1 - Задача 1: API Gateway

Решение для обеспечения реализации API Gateway:

Варианты:

|       Products        |       Kong    |   Tyk.io   |  HAProxy |     APIGee         |  AWS Gateway | Azure Gateway     | Express Gateway |
|-----------------------|:-------------:|:----------:|:--------:|:------------------:|:------------:|:-----------------:|:-----------------:|
|Сложность развертывания | Single node |Single node |  Single node |Many nodes with different roles |Cloud vendor PaaS | Cloud vendor PaaS | Flexible |
|Требуются хранилища данных| Cassandra or Postgres |Redis | |Cassandra, Zookeeper, and Postgres| Cloud vendor PaaS |Cloud vendor PaaS |Redis|
|Открытый исходный код| Yes, Apache 2.0 |Yes, MPL | Free | No |No |No |Yes, Apache 2.0|
|Основные технологии| NGINX/Lua |GoLang | Lua |Java |Not open |Not open |Node.js Express|
|Локально |Yes |Yes | Yes |Yes |No |No |Yes|
|Сообщество/Расширения| Large |Medium |  Medium |No |No| No |Small|
|Ключи авторизации/API| Yes |Yes |  Yes |Yes |Yes |Yes |Yes|
|Ограничение скорости| Yes |Yes | Yes  |Yes |Yes |Yes |Yes|

Свои функции выполняют все варианты.
Для небольшого проекта можно использовать облачные API Gateway, например AWS Gateway или Azure Gateway (есть бесплатный объём).
Если требуется развернуть API Gateway локально, то выбираем соответствующее решение. Например оптимальным будет Kong - широко распространенное бесплатное решение, продукт с большим сообществом. Имеется много различных схем реализации API Gateway на данном продукте.
Другой вариант - HAProxy, как более быстрая и универсальная альтернатива.

## Задача 2: Брокер сообщений

Решение для обеспечения реализации - Брокер сообщений:

| Брокер                                                | Kafka | Redis | RabbitMQ | ActiveMQ |
|-------------------------------------------------------|:-----:|:-----:|:--------:|:--------:|
| Поддержка кластеризации для обеспечения надежности    | +     | +     | +        | +        |
| Хранение сообщений на диске в процессе доставки       | +     | -     | +        | +        |
| Высокая скорость работы                               | +     | +     | +        | -        |
| Поддержка различных форматов сообщений                | +     | +     | +        | +        |
| Разделение прав доступа к различным потокам сообщений | +     | +     | +        | +        |
| Простота эксплуатации                                 | +     | +     | +        | +        |

Наиболее подходящие варианты Kafka или RabbitMQ. Выбор будет зависеть от того, что является приоритетом, на какие параметры нужно обратить внимание, а какие параметры можно считать второстепенными:

- Kafka - максимальной производительности. Имеет распределенную очередь с высокой пропускной способностью, созданный для длительного хранения больших объемов данных. Она идеально подходит в тех случаях, где требуется персистентность.

- RabbitMQ - широко применяемый и популярный брокер со множеством функций и возможностей, поддерживающих сложную маршрутизацию. Обеспечивает маршрутизацию сообщений при незначительном трафике (несколько десятков тысяч сообщений в секунду). Дополнительный функционал: упорядочивать произвольные группы событий.
