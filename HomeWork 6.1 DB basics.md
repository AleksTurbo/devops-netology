# Домашнее задание к занятию "6.1. Типы и структура СУБД"

## Задача 1

Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.

Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- Электронные чеки в json виде

```Применяем документо-ориентированые БД, например, MongoDB - документы в ней хранятся в JSON или BSON```

- Склады и автомобильные дороги для логистической компании

```Применяем графовые БД, например, Neo4j - решает задачу оптимизация пути от точки А до точки Б```

- Генеалогические деревья

```Применяем сетевые БД, например, IDS - Сетевая БД состоит из набора экземпляров определенного типа записи и набора экземпляров определенного типа связей между этими записями.```

- Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутентификации

```Применяем ключ-значение БД, например, Memcached - хранится в RAM, есть настройка времени жизни записи (TTL)```

- Отношения клиент-покупка для интернет-магазина

```Применяем реляционные БД, например, Postgres/MySQL - табличное решение имеет возможность дальнейшего развития структуры```

## Задача 2

Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- Данные записываются на все узлы с задержкой до часа (асинхронная запись)

```text
AP - обеспечивает Доступность (Availability) и терпимость к разделению сети (Partition Tolerance), 
    Не обеспечивает Согласованность (Consistency) - данные в разных узлах могут отличаться
PA-EL 
```

- При сетевых сбоях, система может разделиться на 2 раздельных кластера

```text
AС - обеспечивает Доступность (Availability) и обеспечивает Согласованность (Consistency). 
    Не обеспечивает терпимость к разделению сети (Partition Tolerance)
PС-EС или PС-EL
```

- Система может не прислать корректный ответ или сбросить соединение

```text
CP - обеспечивает Согласованность (Consistency) и терпимость к разделению сети (Partition Tolerance), 
    Не обеспечивает Доступность (Availability)
PA-EC
```

## Задача 3

Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

```txt
Не могут, т.к. есть принципы противоречат друг другу. BASE отдает приоритет высокой производительности/доступности
в ущерб согласованности данных.
Главное разногласие в требовании согласованности.
ACID требует немедленной согласованности, BASE согласованности в какой-то момент времени в будущем, и согласованность
может обеспечиваться не механизмами БД, а средствами разработки.
```

## Задача 4

Вам дали задачу написать системное решение, основой которого бы послужили:

- фиксация некоторых значений с временем жизни
- реакция на истечение таймаута
- Вы слышали о key-value хранилище, которое имеет механизм Pub/Sub. Что это за система? Какие минусы выбора данной системы?

```txt
Подойдет применение СУБД Redis. Redis это key-value хранилище, имеет механизм Pub/Sub и TTL с возможностью реакции на его истечение.
минусы Redis:
- Высокие требования к оперативной памяти сервера
- Консистентность данных - в случае отказа сервера, данные из оперативной памяти будут утеряны и сохранятся только данные 
с последней синхронизации с диском
- Отсутствует разграничение прав доступа по пользователям.
- Отсутствует поддержка языка SQL
- Экземпляр БД не маштабируется
- Работает только на одном ядре процессора в однопоточном режиме
```
