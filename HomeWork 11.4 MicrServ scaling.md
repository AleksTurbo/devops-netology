# Домашнее задание к занятию "11.4  "Микросервисы: масштабирование"

## Задание 1 - Кластеризация

### Постановка задачи

Требуется предложить решение для обеспечения развертывания, запуска и управления приложениями. Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.
Решение должно соответствовать следующим требованиям:

- Поддержка контейнеров;
- Обеспечивать обнаружение сервисов и маршрутизацию запросов;
- Обеспечивать возможность горизонтального масштабирования;
- Обеспечивать возможность автоматического масштабирования;
- Обеспечивать явное разделение ресурсов доступных извне и внутри системы;
- Обеспечивать возможность конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п.

### Вариант решения

Для обеспечения развертывания, запуска и управления приложениями предлагаю систему Kubernetes (<https://kubernetes.io/>). Решение отвечает указанным требованиям. Данный продукт имеет большое комьюнити, по нему существует много полезной информации (подробная документация, примеры реализации проектов).

Kubernetes (K8s) - открытое программное обеспечение (с открытым исходным кодом) для оркестровки контейнеризированных приложений — автоматизации их развёртывания, масштабирования и координации в условиях кластера. Поддерживает основные технологии контейнеризации, включая Docker, rkt, также возможна поддержка технологий аппаратной виртуализации.

Обоснование выбора:

1. Kubernetes поддерживает разные системы контейнеризации.
2. Для обнаружения сервисов и маршрутизации запросов имеется Kubernetes DNS. Каждому сервису, созданному с помощью объекта service присваивается доменное имя совпадающее с именем самого сервиса. Маршрутизация происходит через kube-proxy и virtual ip.
3. Имеется возможность горизонтального масштабирование в Kubernetes. HPA масштабирует количество реплик pod'ов. В качестве триггеров для изменения количества реплик можно использовать нагрузку на процессор и память.
4. Есть функция автоматического масштабирования - autoscaling. В зависимости от нагрузки Kubernetes сам будет поддерживать min либо max количество запущенных экземпляров сервиса.
5. Для разделения ресурсов доступных извне и внутри системы применяется Namespaces - это способ разделить кластер на индивидуальные зоны. NetworkPolicy и GlobalNetworkPolicy дает разграничение доступа внутри кластера, контроль исходящего и входящего трафика. ingress-controller - обеспечивает маршрутизацию трафика.
6. Позволяет конфигурировать приложения с помощью переменных среды, в том числе с возможностью безопасного хранения чувствительных данных таких как пароли, ключи доступа, ключи шифрования и т.п. В Kubernetes есть объект - secret для хранения чувствительных данных. Также есть vault для множества функционала по хранению секретов. Env для установки переменных сред в контейнеры.
